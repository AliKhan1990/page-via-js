<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>动态生成表格</title>
    <script src="lib/jquery-3.1.1.min.js"></script>
    <script src="lib/dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="lib/dist/css/bootstrap.css">
</head>
<body>
    <div id="content"></div>
    <nav></nav>
</body>
<script>
    const data = {
        url:"data/data.json",
        pageSize:7,
        contSize:10,
        id:"content"
    };

    /*
    * url为请求数据地址
    * pageSize显示页数
    * contSize显示条数
    * */
    var jQCreatePageList = function(data){
        var dataObj = data;
        $.ajax({
            url:dataObj.url,
            dataType:"json",
            type:"post",
            success:function(d){
                let pageSize = 7;
                let contSize = 10;
                let jsonData = d.result;
                let pagesCounts = d.result.length / contSize;
                let nameArr = ["num"];
                $("#"+dataObj.id).append("<table class='table table-bordered'></table>");
                // 构建标题栏
                $("#"+dataObj.id).find("table").append("<tr></tr>");
                $("#"+dataObj.id).find("table tr:first-of-type").append("<th>num</th>");
                for(let key in jsonData[0]){
                    $("#"+dataObj.id).find("table tr:first-of-type").append("<th>"+key+"</th>");
                    nameArr.push(key);
                }
                console.log(nameArr)
                //构建表格
                $.each(jsonData,function (index,data) {
                    let num = index+2;
                    $("#"+dataObj.id).find("table").append("<tr><td>"+(num-1)+"</td></tr>");
                    for(let j=1;j<nameArr.length;j++){
                        let value = nameArr[j];
                        $("#"+dataObj.id).find("table tr:nth-child("+(num)+")").append("<td>"+data[value]+"</td>")
                    }
                });
                //构建分页按钮
                $("nav").append("<ul class='pagination'>"+
                "<li class='disabled'><span>&laquo;</span></li></ul>");
                for(let i=0;i<10;i++){
                    if(i==0){
                        $("nav").find("ul").append("<li class='active'><span>"+(i+1)+"<span class='sr-only'>(current)</span></span></li>");
                    }else{
                        $("nav").find("ul").append("<li><span>"+(i+1)+"<span class='sr-only'>(current)</span></span></li>");
                    }
                }
            }
        })
    };
    jQCreatePageList(data);
</script>
</html>